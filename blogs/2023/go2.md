---
title: Golang学习与实践(二)
tags:
  - go
categories:
  - Golang
date: 2023/10/14
---

## 声明与赋值
### 变量的声明与赋值
在 `Go` 中, 变量的声明格式一般为:
```
var name type
```
其中,`var` 是声明变量的关键字, 固定不变, `name` 是变量名, `type` 是该变量所属的数据类型。    
和大多数语言一样, 使用 `=` 进行赋值。
```
var number int
number = 100
// 或合并写
var number int = 100
```
### 常量的声明与赋值
常量声明和赋值的格式为:
```
const name type = value
```
其中, `const` 是声明常量的关键字, 固定不变, `name` 是变量名, `type` 是该变量所属的数据类型, `value` 是常量的值。   
声明常量时, 必须为其赋值。
```
const number int = 100
```

### 批量声明与赋值
为了方便多个变量、常量的声明与赋值, 我们口语批量处理他们:
```
// 变量
var (
  number int = 100
  text = "hello"
  name string
)

// 常量
const (
  PI float64 = 3.14
  WIDTH = 5
  HEIGHT = 10
)
```

## Go 语言的类型推断
如果数据类型为 Go语言内置的基础类型, 则可以无需指定类型, Go语言会自动进行类型推断。
```
var number = 100
const PI = 3.14
```
由于 `number` 的值为 100, Go语言会推断出他的类型为整数型, 同理, `PI` 的类型为浮点型。    
对于变量, 还有一种极为精简的声明与赋值方式:
```
number := 100
```
`:=` 的作用是声明和赋值, 如果是已经声明过的变量, 无法直接使用 `:=`

## 基本数据类型
### 整数型
| 类型 | 精度 |
|------|------|
| uint8 | 无符号8位整数(0到2^8-1) |
| uint16 | 无符号16位整数(2^16-1) |
| uint32 | 无符号32位整数(0到2^32-1) |
| uint64 | 无符号64位整数(0到2^64-1) |
| int8 | 有符号8位整数(-2^7到2^7-1) |
| int16 | 有符号16位整数(-2^15到2^15-1) |
| int32 | 有符号32位整数(-2^31到2^31-1) |
| int64 | 有符号64位整数(-2^63到2^63-1) |

### 浮点型
| 类型 | 精度 |
|------|------|
| float32 | the set of all IEEE-754 32-bit floating-point numbers |
| float64 | the set of all IEEE-754 64-bit floating-point numbers |

### 复数型
| 类型 | 精度 |
|------|------|
| complex64 | 含 float32 实数和 float32 虚数 |
| complex128 | 含 float64 实数和 float64 虚数 |

### 布尔型
| 类型 | 精度 |
|------|------|
| bool | true或false |

### 字符串型
| 类型 | 精度 |
|------|------|
| string | UTF-8 编码表示的 Unicode |

## 指针类型
### 类型指针
在传递数据时直接使用指针可以避免创建数据的副本, 借阅内存开销。类型指针不能进行偏移和运算, 可以避免非法修改为其他数据的风险, 也更有利于垃圾回收机制找到并回收他们。使用 `&` 运算符, 获取变量的内存地址。

### 切片指针
切片由指向起始元素的指针、元素数量和总容量构成。当访问切片发生越界时, 会发生宕机并输出堆栈信息。宕机是可以恢复的, 而崩溃只能导致程序停止运行。使用 `*` 运算符, 获取该内存地址实际对应的值。

### new()
我们还可以使用 new() 函数直接创建指针变量, 相当于在内存中创建了没有变量名的某种类型的变量。   
常用在无需变量名或必须传递指针变量值的场景中。    
使用格式如下:
```
new(type)
```
代码示例:
```
ptr := new(int64) // 地址

*ptr = 100        // 为该地址的内存
fmt.Println(*ptr) // 输出 100
```

## 运算符与优先级
### 算术运算符
go 的算数运算符与其他语言一致, 分别有 `+`、`-`、`*`、`/`、`%`、`++`、`--`。
### 关系运算符
关系运算符用来判断两者的关系, 结果与判断条件一致时, 返回 `true`, 不一致时, 返回 `false`。分别有 `>`、`>`、`>=`、`<=`、`==`、`!=`。
### 逻辑运算符
逻辑运算符通常用来将两个条件组合, 获得组合后的关系, 最终将输出布尔类型值。分别有 `&&`、`||`、`!` 表示 `与`、`或`、`非`。
### 位运算符
在使用位运算符进行整数型变量运算时, 会将其他进制数值转换成二进制数值, 然后采用二进制数值的方式进行运算, 并返回原始进制类型的计算结果。   
分别有 `&` `|` `^` `<<` `>>`, 表示 `与`、`或`、`异或`、`左移`、`右移`。
### 指针运算符
分别有 `&` 和 `*`, 详见前文指针类型部分。

## 类型转换
在部分场景中, 我们需要对数据类型进行转换才能进行后续逻辑, 在Go语言中, 进行类型转换有两个需要注意的地方:
1. 只能进行相同类别的转换, 进行不同类别的转换将会引发编译时的错误。
2. 若将取值较大的类型转换为取值范围较小的类型, 且实际值超过取值范围较小的类型时将会发生精度丢失的情况。
```
var a int = 1
var b float64 = 1.2
a = int(b)
```